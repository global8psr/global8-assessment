<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보안컨설턴트 역량 진단 - (주)글로벌에잇</title>
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        
        /* 슬라이더 커스텀 스타일 */
        .range-slider::-webkit-slider-thumb { 
            -webkit-appearance: none; appearance: none; 
            width: 22px; height: 22px; 
            background: #2563eb; cursor: pointer; 
            border-radius: 50%; border: 3px solid white; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); 
            transition: background 0.2s;
        }
        .range-slider::-webkit-slider-thumb:hover { background: #1d4ed8; }
        .range-slider { -webkit-appearance: none; width: 100%; height: 8px; background: #e2e8f0; border-radius: 5px; outline: none; }
        
        /* 화면 전환 애니메이션 */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* 인쇄 시 스타일 */
        @media print {
            .no-print { display: none !important; }
            body { background: white; -webkit-print-color-adjust: exact; }
            .shadow-xl, .shadow-md, .shadow-sm { box-shadow: none !important; border: 1px solid #ddd; }
            #reportView { display: block !important; }
            #introSection, #diagnosisSection { display: none; } /* 보고서만 출력 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header (Brand Area) -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 no-print">
        <div class="max-w-5xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <!-- 회사 로고 영역 -->
                <div class="w-10 h-10 bg-blue-800 rounded flex items-center justify-center text-white font-bold text-xl shadow-md">
                    G8
                </div>
                <div>
                    <h1 class="text-xl font-bold text-slate-800 tracking-tight">직무 역량 진단 시스템</h1>
                    <p class="text-xs text-slate-500 font-medium">Powered by (주)글로벌에잇</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="window.print()" class="bg-slate-800 hover:bg-slate-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center shadow-sm">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
                    PDF 저장
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto p-6 pb-20">
        
        <!-- STEP 1: Intro & Settings (Initial View) -->
        <section id="introSection" class="bg-white rounded-xl shadow-lg border border-slate-200 p-8 mb-8 fade-in">
            <div class="border-b border-slate-100 pb-6 mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">보안컨설턴트 역량 진단 안내</h2>
                <p class="text-slate-600 leading-relaxed">
                    본 진단은 (주)글로벌에잇의 컨설턴트 육성 체계에 기반하여, <br>
                    개인의 <b>공통 소양(Mindset)</b>과 <b>직무 전문성(Expertise)</b>을 객관적으로 파악하기 위해 설계되었습니다.
                </p>
            </div>

            <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center">
                    <span class="w-1.5 h-6 bg-blue-600 rounded-full mr-2"></span>
                    진단자 정보 입력
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- 이름 -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">성명</label>
                        <input type="text" id="userName" placeholder="홍길동" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 outline-none transition">
                    </div>
                    <!-- 경력 -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">경력 (년차)</label>
                        <div class="relative">
                            <input type="number" id="userExp" placeholder="예: 3" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 outline-none transition pr-12">
                            <span class="absolute right-4 top-3 text-slate-400 text-sm">년차</span>
                        </div>
                    </div>
                    <!-- 이메일 -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">이메일 주소</label>
                        <input type="email" id="userEmail" placeholder="example@global8.co.kr" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 outline-none transition">
                    </div>
                    <!-- 직무 트랙 -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">직무 트랙 선택</label>
                        <select id="jobTrack" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 outline-none bg-white transition cursor-pointer">
                            <option value="tech">기술적 진단 (Technical Security)</option>
                            <option value="admin">관리적 진단 (GRC / Consulting)</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button onclick="startDiagnosis()" class="bg-blue-600 hover:bg-blue-700 text-white text-lg px-12 py-3 rounded-xl font-bold shadow-lg shadow-blue-200 transition transform hover:-translate-y-1 flex items-center mx-auto">
                        진단 시작하기
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- STEP 2: Diagnosis Questions (Hidden initially) -->
        <section id="diagnosisSection" class="hidden fade-in">
            
            <div class="bg-blue-50 border border-blue-100 rounded-lg p-4 mb-6 flex items-start text-sm text-blue-800 no-print">
                <svg class="w-5 h-5 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <p><strong>Tip:</strong> 각 문항의 슬라이더를 움직이면 **점수별 상세 기준(Rubric)**이 표시됩니다. 현재 본인의 역량 수준과 가장 일치하는 설명을 선택해 주세요.</p>
            </div>

            <div id="questionArea" class="space-y-8 no-print">
                <!-- Questions injected here -->
            </div>

            <div class="mt-12 text-center no-print">
                <button onclick="generateReport()" class="group bg-slate-800 hover:bg-slate-700 text-white text-lg px-10 py-4 rounded-xl font-bold shadow-lg transition-all transform hover:-translate-y-1">
                    <span class="flex items-center justify-center">
                        결과 분석 보고서 생성
                        <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    </span>
                </button>
            </div>
        </section>

        <!-- STEP 3: Report View (Hidden initially) -->
        <div id="reportView" class="hidden mt-8 fade-in">
            <!-- Cover / Header -->
            <div class="bg-white rounded-t-2xl border border-slate-200 p-10 text-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 to-slate-800"></div>
                <h2 class="text-3xl font-extrabold text-slate-900 mb-2">역량 진단 분석 보고서</h2>
                <p class="text-slate-500 font-medium">Competency Assessment Report</p>
                
                <div class="flex justify-center items-center mt-8 space-x-8 text-sm text-slate-600 flex-wrap">
                    <div class="flex flex-col items-center min-w-[80px]">
                        <span class="text-slate-400 text-xs uppercase tracking-wider">Consultant</span>
                        <span id="reportName" class="font-bold text-lg text-slate-800 mt-1"></span>
                    </div>
                    <div class="w-px h-8 bg-slate-200"></div>
                    <div class="flex flex-col items-center min-w-[80px]">
                        <span class="text-slate-400 text-xs uppercase tracking-wider">Experience</span>
                        <span id="reportExp" class="font-bold text-lg text-slate-800 mt-1"></span>
                    </div>
                    <div class="w-px h-8 bg-slate-200"></div>
                    <div class="flex flex-col items-center min-w-[80px]">
                        <span class="text-slate-400 text-xs uppercase tracking-wider">Track</span>
                        <span id="reportTrack" class="font-bold text-lg text-blue-600 mt-1"></span>
                    </div>
                </div>
                <div class="mt-2 text-xs text-slate-400" id="reportEmail"></div>
            </div>

            <!-- Charts Section -->
            <div class="bg-white border-x border-slate-200 p-8 grid grid-cols-1 md:grid-cols-2 gap-10">
                <!-- Chart 1 -->
                <div class="flex flex-col items-center p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <h3 class="text-md font-bold text-slate-700 mb-4 flex items-center">
                        <span class="w-2 h-2 bg-indigo-500 rounded-full mr-2"></span>공통 소양 (Mindset)
                    </h3>
                    <div class="relative w-full aspect-square max-w-[300px]">
                        <canvas id="commonRadarChart"></canvas>
                    </div>
                    <div id="commonScoreSummary" class="mt-4 text-sm font-medium text-slate-600 bg-white px-4 py-1 rounded-full border border-slate-200 shadow-sm"></div>
                </div>

                <!-- Chart 2 -->
                <div class="flex flex-col items-center p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <h3 class="text-md font-bold text-slate-700 mb-4 flex items-center">
                        <span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>직무 전문성 (Expertise)
                    </h3>
                    <div class="relative w-full aspect-square max-w-[300px]">
                        <canvas id="jobRadarChart"></canvas>
                    </div>
                    <div id="jobScoreSummary" class="mt-4 text-sm font-medium text-slate-600 bg-white px-4 py-1 rounded-full border border-slate-200 shadow-sm"></div>
                </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="bg-white border-x border-slate-200 p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Strength -->
                    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h3 class="text-blue-800 font-bold mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            핵심 강점 (Strength)
                        </h3>
                        <p id="strengthText" class="text-sm text-slate-700 leading-relaxed"></p>
                    </div>
                    <!-- Weakness -->
                    <div class="bg-rose-50 rounded-xl p-6 border border-rose-100">
                        <h3 class="text-rose-800 font-bold mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                            보완 필요 영역 (Improvement)
                        </h3>
                        <p id="weaknessText" class="text-sm text-slate-700 leading-relaxed"></p>
                    </div>
                </div>
            </div>

            <!-- Total Comment -->
            <div class="bg-white rounded-b-2xl border border-slate-200 border-t-0 p-8 pt-4">
                <div class="border-t border-slate-100 pt-6">
                    <h3 class="text-slate-800 font-bold mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                        종합 코멘트 및 성장 가이드
                    </h3>
                    <p id="totalComment" class="text-slate-700 leading-relaxed text-sm"></p>
                </div>
                
                <!-- Footer for Report -->
                <div class="mt-8 text-center border-t border-slate-100 pt-6">
                    <p class="text-xs text-slate-400 font-medium">
                        Copyright © 2025 (주)글로벌에잇(Global 8). All Rights Reserved. <br>
                        본 보고서는 사내 대외비 자료이므로 외부 유출을 금지합니다.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!-- Script Logic -->
    <script>
        const commonCategories = ["원활한 의사소통", "적극적 평생학습", "주도적 문제해결", "협력적 팀워크", "체계적 규칙 준수", "윤리적 책임감"];
        const techCategories = ["IT관련학과 졸업(지식)", "IT관련자격/수상", "프로그래밍 지식", "보안솔루션 이해도", "기술진단 근무경험", "컴퓨터활용능력"];
        const adminCategories = ["IT관련학과 졸업(지식)", "보안관련자격증", "법령이해도", "인증준비/대응경험", "위험 관리", "문서작성능력"];

        const questions = [
            // [1] 공통 소양 (Common)
            { id: 101, category: "원활한 의사소통", track: "common", text: "고객 및 팀원과 오해 없이 명확하게 의견을 주고받으며, 경청하는 태도를 갖추고 있는가?", rubric: {1: "의사소통에 어려움이 많아 업무 진행이 자주 막힘", 2: "단순 정보 전달은 가능하나 설득/조율이 미흡함", 3: "일반적 상황에서 원만히 소통하며 보고 체계 준수", 4: "복잡한 이슈를 논리적으로 설명하여 상대를 설득함", 5: "갈등을 중재하고 최적의 합의를 이끌어내는 탁월함"} },
            { id: 102, category: "적극적 평생학습", track: "common", text: "변화하는 기술과 트렌드 습득을 위해 지속적으로 학습하는가?", rubric: {1: "업무 외 별도 학습 없음", 2: "필요시에만 간헐적으로 정보 탐색", 3: "주 1회 이상 관련 기사/문서를 읽으며 트렌드 파악", 4: "월 1회 이상 세미나/스터디 활동 지속", 5: "학습 내용을 가공하여 사내/외에 지식 공유"} },
            { id: 103, category: "주도적 문제해결", track: "common", text: "문제 발생 시 회피하지 않고, 주도적으로 해결책을 제시하는가?", rubric: {1: "당황하여 해결하지 못하거나 회피함", 2: "단순 보고 후 지시를 기다림", 3: "1차 원인 분석 후 스스로 해결 시도", 4: "다양한 대안을 마련해 보고하고 주도적 해결", 5: "근본 원인을 제거하고 재발 방지책까지 수립"} },
            { id: 104, category: "협력적 팀워크", track: "common", text: "팀의 목표 달성을 우선시하며, 동료를 적극적으로 돕는가?", rubric: {1: "개인 업무만 처리, 협업 기피", 2: "요청 시에만 소극적 협조", 3: "맡은 역할 충실, 팀 분위기 저해 안함", 4: "동료의 어려움을 먼저 파악하고 지원 자처", 5: "팀 멘토로서 조직 결속력 강화에 기여"} },
            { id: 105, category: "체계적 규칙 준수", track: "common", text: "사내 프로세스, 보고 체계, 컨설팅 방법론 등을 준수하는가?", rubric: {1: "규정 위반 잦음, 임의 판단 진행", 2: "지적 받아야 규정 준수 (수동적)", 3: "지적 없이 표준 프로세스/가이드 준수", 4: "규정 취지 이해 및 상황별 유연한 적용", 5: "비효율적 프로세스 개선 제안 및 독려"} },
            { id: 106, category: "윤리적 책임감", track: "common", text: "고객 정보를 보호하며 높은 윤리 의식을 가지고 있는가?", rubric: {1: "보안 중요성 미인지, 관리 소홀", 2: "기본 수칙 준수하나 보안 의식 다소 부족", 3: "정보보호 규정 철저 준수, 사고 없음", 4: "잠재적 위협을 선제 식별하여 고객 통보", 5: "최고 수준의 직업 윤리로 타의 모범이 됨"} },

            // [2] 기술적 진단 (Tech)
            { id: 201, category: "IT관련학과 졸업", track: "tech", text: "OS, 네트워크, DB 등 컴퓨터 공학 기초 지식을 보유하고 있는가?", rubric: {1: "비전공자, IT 기초 지식 전무", 2: "비전공자이나 학원 등 통해 기초 용어 이해", 3: "전공자(전문대 졸) 또는 이에 준하는 지식", 4: "전공자(4년제)로 CS 지식 실무 적용 가능", 5: "석사 이상 또는 아키텍처 설계 가능 수준"} },
            { id: 202, category: "IT관련자격/수상", track: "tech", text: "정보보안기사 등 관련 자격을 보유하거나 수상 이력이 있는가?", rubric: {1: "관련 자격증 없음", 2: "기초 자격증(네관, 리눅스) 보유", 3: "기사급 1개(정보처리/보안) 보유", 4: "기사급 2개 이상 또는 해킹방어대회 본선", 5: "기술사, 해외 고급자격(OSCP) 또는 입상"} },
            { id: 203, category: "프로그래밍 지식", track: "tech", text: "언어를 이해하고 도구 제작 등에 활용할 수 있는가?", rubric: {1: "프로그래밍 이해 전무", 2: "기본 문법 해독 가능 수준", 3: "공개 코드/스크립트 수정 사용 가능", 4: "Python/Go 등으로 필요 도구 직접 개발", 5: "대규모 소스코드 분석 및 아키텍처 진단"} },
            { id: 204, category: "보안솔루션 이해도", track: "tech", text: "주요 보안 솔루션(WAF, IPS 등)의 역할과 원리를 이해하는가?", rubric: {1: "종류와 기능 알지 못함", 2: "기본적 역할(차단/탐지)만 인지", 3: "로그 분석 및 탐지 여부 판단 가능", 4: "정책(Rule) 진단 및 우회 공격 시도 가능", 5: "네트워크 구성별 최적 배치/튜닝 제안 가능"} },
            { id: 205, category: "기술진단 근무경험", track: "tech", text: "웹/앱 진단, 모의해킹 등 실무 프로젝트 수행 횟수는?", rubric: {1: "경험 없음 (0회)", 2: "초급 수행 (1~5회 미만, 보조)", 3: "중급 수행 (5~15회 미만, 단독)", 4: "고급 수행 (15~30회 미만, PL급)", 5: "특급 수행 (30회 이상, PM급)"} },
            { id: 206, category: "OA 활용 능력", track: "tech", text: "Excel, PPT 등 리포팅 도구 활용 능력은?", rubric: {1: "문서 작성 어려움", 2: "단순 텍스트 입력 가능", 3: "함수 활용 및 도식화 원활", 4: "매크로/고급 기능으로 시간 단축", 5: "고품질 제안서/보고서 독립 제작 가능"} },

            // [3] 관리적 진단 (Admin)
            { id: 301, category: "IT관련학과 졸업", track: "admin", text: "인프라 및 보안 시스템 구조를 이해할 수 있는 지식이 있는가?", rubric: {1: "비전공자, 용어 이해 어려움", 2: "기초 교육 이수로 용어 소통 가능", 3: "전공자 수준으로 인프라 구성도 이해", 4: "복잡한 아키텍처 분석 및 리스크 식별", 5: "Cloud/AI 등 신기술 보안 아키텍처 이해"} },
            { id: 302, category: "보안관련자격증", track: "admin", text: "ISMS-P 심사원, CISA 등 직무 관련 자격증을 보유했는가?", rubric: {1: "보유 자격증 없음", 2: "기초 자격증(CPPG 등) 보유", 3: "중급 자격증(보안기사, CISA) 보유", 4: "ISMS-P 인증심사원 자격 보유", 5: "심사원 + 기술사/CISSP 등 다수 보유"} },
            { id: 303, category: "법령이해도", track: "admin", text: "개인정보보호법 등 관련 법령을 해석하고 적용할 수 있는가?", rubric: {1: "존재만 인지, 내용 모름", 2: "핵심 조항 정도만 인지", 3: "법령 찾아보며 위법 여부 판단 가능", 4: "해설서 숙지로 즉각 가이드 가능", 5: "개정 트렌드 예측 및 전략 수립 가능"} },
            { id: 304, category: "인증 대응 경험", track: "admin", text: "ISMS-P 등 인증 심사/컨설팅 수행 경험 횟수는?", rubric: {1: "없음 (0~1회 미만)", 2: "초급 (1~3회 미만, 보조)", 3: "중급 (3~10회 미만, 담당)", 4: "고급 (10회 이상, 리딩)", 5: "전문가 (심사원 활동 병행)"} },
            { id: 305, category: "위험 관리", track: "admin", text: "자산 식별, 위험 평가 등 위험 관리 프로세스를 수행할 수 있는가?", rubric: {1: "위험 관리 개념 미숙지", 2: "기존 위험 평가표 업데이트 수준", 3: "자산 식별~위험도 산정 프로세스 수행", 4: "비즈니스 특성에 맞춘 커스터마이징 가능", 5: "ERM 관점의 경영진 보고용 지표 도출"} },
            { id: 306, category: "문서작성능력", track: "admin", text: "정책서, 지침서, 보고서 등 비즈니스 문서를 작성할 수 있는가?", rubric: {1: "비즈니스 문서 양식 이해 부족", 2: "단순 데이터 정리 및 회의록 작성", 3: "규정 제·개정안 및 결과보고서 초안 작성", 4: "논리적 완결성 높은 보고서로 고객 설득", 5: "임원 보고용 요약(Executive Summary) 탁월"} }
        ];

        let commonChart = null;
        let jobChart = null;

        // 화면 전환 로직
        function startDiagnosis() {
            // 입력값 체크 (간단한 유효성 검사)
            const name = document.getElementById('userName').value;
            if (!name) {
                alert("성명을 입력해 주세요.");
                return;
            }

            // 트랙에 따라 문항 렌더링
            renderQuestions();

            // 화면 전환
            document.getElementById('introSection').style.display = 'none';
            document.getElementById('diagnosisSection').style.display = 'block';
            document.getElementById('diagnosisSection').classList.remove('hidden');
            
            // 상단으로 스크롤
            window.scrollTo(0, 0);
        }

        function renderQuestions() {
            const track = document.getElementById('jobTrack').value;
            const container = document.getElementById('questionArea');
            container.innerHTML = "";

            renderSection(container, "1. 보안컨설턴트 공통 소양 (Mindset)", questions.filter(q => q.track === "common"));
            const trackTitle = track === 'tech' ? "2. 기술적 진단 직무 전문성 (Technical)" : "2. 관리적 진단 직무 전문성 (Managerial)";
            renderSection(container, trackTitle, questions.filter(q => q.track === track));
        }

        function renderSection(container, titleText, questionList) {
            const title = document.createElement('h3');
            title.className = "text-lg font-bold mt-6 mb-4 pb-2 border-b border-slate-200 text-slate-800 no-print";
            title.innerText = titleText;
            container.appendChild(title);

            questionList.forEach(q => {
                const wrapper = document.createElement('div');
                wrapper.className = "mb-6 p-5 bg-white rounded-xl border border-slate-200 shadow-sm transition hover:shadow-md";
                
                // Header
                const header = document.createElement('div');
                header.className = "flex flex-col md:flex-row justify-between mb-4";
                header.innerHTML = `
                    <div class="mb-2 md:mb-0">
                        <span class="inline-block text-xs font-bold text-blue-600 bg-blue-50 border border-blue-100 px-2 py-1 rounded-full mr-2 mb-1">${q.category}</span>
                        <div class="font-medium text-slate-800 text-md leading-snug">${q.text}</div>
                    </div>
                    <div class="font-bold text-blue-600 text-xl whitespace-nowrap md:ml-4 text-right flex items-center justify-end">
                        <span id="scoreVal_${q.id}" class="mr-1">3</span><span class="text-sm text-slate-400 font-normal">/ 5</span>
                    </div>
                `;
                
                // Input
                const input = document.createElement('input');
                input.type = "range";
                input.min = "1";
                input.max = "5";
                input.value = "3";
                input.className = "range-slider w-full mb-4";
                input.dataset.id = q.id;
                input.dataset.category = q.category;
                input.dataset.trackType = q.track === 'common' ? 'common' : 'job';
                
                // Rubric Box
                const descBox = document.createElement('div');
                descBox.id = `desc_${q.id}`;
                descBox.className = "rubric-box bg-slate-50 border border-slate-200 p-4 rounded-lg text-sm text-slate-600 flex items-start";
                descBox.innerHTML = `
                    <svg class="w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span><strong class="text-slate-800">3점 기준:</strong> ${q.rubric[3]}</span>
                `;

                // Listener
                input.oninput = function() {
                    const val = this.value;
                    document.getElementById(`scoreVal_${q.id}`).innerText = val;
                    document.getElementById(`desc_${q.id}`).innerHTML = `
                        <svg class="w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span><strong class="text-slate-800">${val}점 기준:</strong> ${q.rubric[val]}</span>
                    `;
                };

                wrapper.appendChild(header);
                wrapper.appendChild(input);
                wrapper.appendChild(descBox);
                container.appendChild(wrapper);
            });
        }

        function generateReport() {
            const name = document.getElementById('userName').value || "Consultant";
            const exp = document.getElementById('userExp').value || "0";
            const email = document.getElementById('userEmail').value || "-";
            const track = document.getElementById('jobTrack').value;

            document.getElementById('reportName').innerText = name;
            document.getElementById('reportExp').innerText = exp + "년차";
            document.getElementById('reportEmail').innerText = email;
            
            const trackName = track === 'tech' ? "기술적 진단" : "관리적 진단";
            document.getElementById('reportTrack').innerText = trackName;

            // 1. Data Collection
            const inputs = document.querySelectorAll('#questionArea input[type="range"]');
            const commonScores = {};
            const jobScores = {};
            
            inputs.forEach(input => {
                const cat = input.dataset.category;
                const val = parseInt(input.value);
                const type = input.dataset.trackType;
                if(type === 'common') commonScores[cat] = val;
                else jobScores[cat] = val;
            });

            // 2. Prepare Data
            const commonData = commonCategories.map(cat => commonScores[cat] || 0);
            const targetJobCategories = track === 'tech' ? techCategories : adminCategories;
            const jobData = targetJobCategories.map(cat => jobScores[cat] || 0);

            // 3. Draw Charts
            drawRadarChart("commonRadarChart", commonCategories, commonData, "공통 역량", 'rgba(99, 102, 241, 0.2)', 'rgb(99, 102, 241)', commonChart, (c) => commonChart = c);
            drawRadarChart("jobRadarChart", targetJobCategories, jobData, "직무 전문성", 'rgba(59, 130, 246, 0.2)', 'rgb(59, 130, 246)', jobChart, (c) => jobChart = c);

            // 4. Summaries
            const commonAvg = (commonData.reduce((a,b)=>a+b, 0) / commonData.length).toFixed(1);
            const jobAvg = (jobData.reduce((a,b)=>a+b, 0) / jobData.length).toFixed(1);
            
            document.getElementById('commonScoreSummary').innerHTML = `Average Score: <strong class="text-slate-800">${commonAvg}</strong> / 5.0`;
            document.getElementById('jobScoreSummary').innerHTML = `Average Score: <strong class="text-slate-800">${jobAvg}</strong> / 5.0`;

            generateTextAnalysis(name, commonScores, jobScores, track);

            // 화면 전환: 진단 섹션 숨기기 -> 보고서 보이기
            document.getElementById('diagnosisSection').style.display = 'none';
            document.getElementById('reportView').classList.remove('hidden');
            document.getElementById('reportView').scrollIntoView({ behavior: 'smooth' });
        }

        function drawRadarChart(canvasId, labels, data, labelName, bgColor, borderColor, chartVar, setChartVar) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            if (chartVar) chartVar.destroy();

            const newChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: labelName,
                        data: data,
                        fill: true,
                        backgroundColor: bgColor,
                        borderColor: borderColor,
                        pointBackgroundColor: borderColor,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: borderColor
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: { line: { borderWidth: 2 } },
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: { stepSize: 1, backdropColor: 'transparent', font: {size: 10} },
                            pointLabels: { 
                                font: { size: 10, weight: 'bold', family: "'Noto Sans KR', sans-serif" },
                                color: '#475569'
                            }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
            setChartVar(newChart);
        }

        function generateTextAnalysis(name, cScores, jScores, track) {
            const allScores = { ...cScores, ...jScores };
            const sorted = Object.entries(allScores).sort((a,b) => b[1] - a[1]);
            const high = sorted.filter(s => s[1] >= 4).map(s => s[0]);
            const low = sorted.filter(s => s[1] <= 2).map(s => s[0]);

            let sText = high.length > 0 
                ? `${name}님은 <strong>${high.join(', ')}</strong> 항목에서 4점 이상의 탁월한 평가를 받았습니다. 이는 해당 분야에서 동료들에게 모범이 될 수 있는 수준이며, 향후 PM이나 멘토로서의 역할 수행이 기대됩니다.`
                : "전반적으로 고른 역량을 보이고 있으나, 확실한 전문 분야(Specialty)를 구축하기 위해 4점 이상을 목표로 하는 전략적인 역량 개발이 필요합니다.";
            
            let wText = low.length > 0
                ? `<strong>${low.join(', ')}</strong> 항목은 2점 이하로 나타나, 우선적인 개선이 필요합니다. 해당 역량 부족은 프로젝트 수행 시 병목 현상을 유발할 수 있으므로, 사내 교육이나 선임자의 코칭을 통해 기본기를 다져야 합니다.`
                : "치명적인 약점(2점 이하)은 발견되지 않았습니다. 현재의 밸런스를 유지하면서, 전문성을 심화할 수 있는 자격증 취득이나 신기술 연구(R&D)에 집중하시기 바랍니다.";

            const cAvg = parseFloat(Object.values(cScores).reduce((a,b)=>a+b,0)/6);
            const jAvg = parseFloat(Object.values(jScores).reduce((a,b)=>a+b,0)/6);
            
            let totalMsg = "";
            if (cAvg >= 4 && jAvg >= 4) totalMsg = "공통 소양(Mindset)과 직무 전문성(Expertise) 모두 Top-Tier 수준입니다. 조직의 핵심 인재로서 대형 프로젝트 관리(PM) 및 후배 양성 역할을 적극 권장합니다.";
            else if (cAvg > jAvg + 1) totalMsg = "훌륭한 태도와 마인드셋을 갖추고 있어 성장 잠재력이 큽니다. 다만 기술적 전문성(Hard Skill)이 이를 뒷받침할 수 있도록 실무 경험 축적과 자격증 취득에 집중하세요.";
            else if (jAvg > cAvg + 1) totalMsg = "직무 전문성은 우수하나, 소통과 협업 등 공통 소양(Soft Skill)의 보완이 필요합니다. 컨설팅은 고객 및 팀과의 협업이 필수적이므로 커뮤니케이션 역량을 강화해야 합니다.";
            else totalMsg = "기본 역량을 갖추며 성장하는 단계입니다. '공통 소양'과 '직무 전문성' 두 개의 육각형을 모두 꽉 채우는 'T자형 인재'를 목표로 꾸준히 정진해 주시기 바랍니다.";

            document.getElementById('strengthText').innerHTML = sText;
            document.getElementById('weaknessText').innerHTML = wText;
            document.getElementById('totalComment').innerText = totalMsg;
        }
    </script>
</body>
</html>